<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estúdios Polymusic - Agendamento</title>
    
    <!-- Fonts - Adicione preconnect para performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Meta tags para performance -->
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Estúdios Polymusic - Agendamento profissional para gravação de áudio e vídeo. Desde 1983 criando a sonoridade perfeita.">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">
                    <!-- Imagem otimizada com lazy loading -->
                    <img src="static/image/logo.png" alt="Logo Polydisc" 
                         width="50" height="50"
                         loading="lazy" decoding="async"
                         style="width: 50px; height: auto; vertical-align: middle;">
                </div>
                <div class="logo-text">
                    <h1>POLY<span>MUSIC</span></h1>
                    <p>ESTÚDIOS PROFISSIONAIS | DESDE 1983</p>
                </div>
            </div>
            <div class="contact-info">
                <p><i class="fab fa-whatsapp"></i> (81) 98446-3644 (Áudio)</p> 
                <p><i class="fab fa-whatsapp"></i> (81) 99134-7040 (Vídeo)</p>
                <p><i class="fas fa-envelope"></i> adm@somax.com.br</p>
            </div>
        </div>
    </header>

    <!-- Hero Section - Vídeo otimizado -->
    <section class="hero">
        <!-- Vídeo de fundo otimizado -->
        <div class="hero-video-container">
            <video class="hero-background" playsinline muted loop preload="metadata"
                   onloadeddata="this.classList.add('loaded')"
                   onerror="this.style.display='none'; document.querySelector('.hero-fallback').style.display='block';">
                <source src="static/video/background.mp4" type="video/mp4">
                <!-- Fallback para WebM se disponível -->
                <source src="static/video/background.webm" type="video/webm">
            </video>
            <!-- Fallback estático -->
            <div class="hero-fallback" style="display: none;"></div>
        </div>

        <div class="hero-content">
            <h2>Polymusic: 40 Anos de História na Música Brasileira</h2>
            <p>A Polymusic nasce de um legado que começou em 1983. Com mais de quatro décadas de tradição, consolidamos nossa marca como um dos estúdios mais icônicos do país, unindo um corpo técnico de elite a equipamentos de excelência.</p>
            <p>Nossa trajetória se confunde com a própria história da música. Fomos o berço de registros antológicos, como o lendário "Paebiru" de Lula Côrtes, e recebemos em nossas salas ícones como Reginaldo Rossi, Lia de Itamaracá, Conde Só Brega e Tayrone.</p>
            <p>Na Polymusic, todas as vertentes culturais e folclóricas encontram seu espaço. Evoluímos do analógico ao digital, acompanhando cada transformação do mercado para garantir que a sua arte receba o tratamento que merece.</p>
            <div class="hero-buttons" style="margin-top: 30px;">
                <button class="btn" onclick="scrollToBooking()">FAZER AGENDAMENTO</button>
                <button class="btn btn-primary" onclick="openPortfolioModal()">
                    <i class="fas fa-images"></i> CONHEÇA NOSSO PORTFÓLIO
                </button>
            </div>
        </div>
    </section>

    <!-- Admin Backdrop -->
    <div class="admin-backdrop" id="adminBackdrop" onclick="closeAdminPanel()"></div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <button class="admin-close" onclick="closeAdminPanel()">
            <i class="fas fa-times"></i>
        </button>
        <div class="section-title">
            <i class="fas fa-user-shield"></i>
            <h2>Painel Administrativo</h2>
        </div>
        
        <div id="adminLogin">
            <div class="form-group admin-password">
                <input type="hidden" id="adminEmail" value="adm@somax.com.br">
                
                <label for="adminPassword">Senha de Administrador:</label>
                <input type="password" id="adminPassword" class="form-control" placeholder="Digite a senha">
            </div>
            <button class="btn" onclick="adminLogin()">Acessar Painel</button>
        </div>
        
        <div id="adminContent" style="display: none;">
            <p>Clique em uma data no calendário abaixo para marcar/desmarcar como disponível.</p>
            
            <div class="calendar">
                <div class="calendar-header">
                    <h3 id="admin-current-month">Junho 2023</h3>
                    <div class="month-nav">
                        <button id="admin-prev-month"><i class="fas fa-chevron-left"></i></button>
                        <button id="admin-next-month"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                
                <div class="weekdays">
                    <div>Dom</div>
                    <div>Seg</div>
                    <div>Ter</div>
                    <div>Qua</div>
                    <div>Qui</div>
                    <div>Sex</div>
                    <div>Sáb</div>
                </div>
                
                <div class="days" id="admin-calendar-days">
                    <!-- Admin calendar days will be generated by JavaScript -->
                </div>
            </div>
            
            <div class="form-group" style="margin-top: 20px;">
                <label for="adminStudioType">Tipo de Estúdio:</label>
                <select id="adminStudioType" class="form-control" onchange="updateAdminCalendar()">
                    <option value="audio">Áudio</option>
                    <option value="video">Vídeo</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="adminPeriodType">Período:</label>
                <select id="adminPeriodType" class="form-control" onchange="updateAdminCalendar()">
                    <option value="full">Período Completo (8h)</option>
                    <option value="half1">Meio Período (10h-14h)</option>
                    <option value="half2">Meio Período (14h-18h)</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" onclick="saveAdminChanges()">Salvar Alterações</button>
                <button class="btn btn-secondary" onclick="resetAdminChanges()">Resetar</button>
                <button class="btn btn-secondary" onclick="restoreDefaultForSelectedDate()">Restaurar Padrão</button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background-color: rgba(76, 201, 240, 0.1); border-radius: var(--border-radius);">
                <h4><i class="fas fa-info-circle"></i> Instruções:</h4>
                <p>• Dias úteis (Seg-Sex) não feriados: VERDE por padrão</p>
                <p>• Finais de semana e feriados: automaticamente indisponíveis</p>
                <p>• Clique em uma data para alternar entre disponível/indisponível</p>
                <p>• As alterações são salvas no Supabase</p>
                <p>• Use "Restaurar Padrão" para remover configurações manuais</p>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Column: Booking Section -->
            <div class="left-column">
                <!-- Booking Section -->
                <section class="booking-section" id="booking">
                    <div class="section-title">
                        <i class="far fa-calendar-alt"></i>
                        <h2>Selecione Data e Horário</h2>
                    </div>
                    
                    <!-- Seletor de Serviço -->
                    <div class="service-toggle" id="serviceToggle">
                        <div class="service-option active" onclick="setService('audio')">
                            <i class="fas fa-microphone-alt"></i>
                            <p>Ver Disponibilidade Áudio</p>
                        </div>
                        <div class="service-option" onclick="setService('video')">
                            <i class="fas fa-video"></i>
                            <p>Ver Disponibilidade Vídeo</p>
                        </div>
                    </div>
                    
                    <!-- Client Name -->
                    <div class="form-group">
                        <label for="clientName">Seu Nome:</label>
                        <input type="text" id="clientName" class="form-control" placeholder="Digite seu nome completo">
                    </div>
                    
                    <!-- Calendar -->
                    <div class="calendar">
                        <div class="calendar-header">
                            <h3 id="current-month">Junho 2023</h3>
                            <div class="month-nav">
                                <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                                <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>
                        
                        <div class="weekdays">
                            <div>Dom</div>
                            <div>Seg</div>
                            <div>Ter</div>
                            <div>Qua</div>
                            <div>Qui</div>
                            <div>Sex</div>
                            <div>Sáb</div>
                        </div>
                        
                        <div class="days" id="calendar-days">
                            <!-- Calendar days will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Calendar Legend -->
                    <div class="calendar-legend">
                        <h4 style="margin-bottom: 10px; font-size: 1rem;">Legenda do Calendário:</h4>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: var(--color-accent-green);"></div>
                                <span>Disponível</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #666;"></div>
                                <span>Final de semana</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #e63946;"></div>
                                <span>Feriado nacional</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #9d4edd;"></div>
                                <span>Feriado estadual</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background-color: #4cc9f0;"></div>
                                <span>Feriado municipal</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Time Slots -->
                    <div class="time-slots-section">
                        <h3>Períodos Disponíveis</h3>
                        <div class="time-slots" id="time-slots">
                            <!-- Time slots will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Studio Selection -->
                    <div class="studio-section">
                        <h3>Selecione o Estúdio</h3>
                        <div class="studio-selection">
                            <div class="studio-option" id="audio-studio" onclick="selectStudio('audio')">
                                <div class="studio-icon audio-icon">
                                    <i class="fas fa-microphone-alt"></i>
                                </div>
                                <h4>Estúdio de Áudio</h4>
                                <p>Gravação, mixagem e masterização</p>
                                <p class="contact-price">Agendamento via WhatsApp</p>
                            </div>
                            
                            <div class="studio-option" id="video-studio" onclick="selectStudio('video')">
                                <div class="studio-icon video-icon">
                                    <i class="fas fa-video"></i>
                                </div>
                                <h4>Estúdio de Vídeo</h4>
                                <p>Gravação, iluminação e produção</p>
                                <p class="contact-price">Orçamento com equipe técnica</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Terms Checkbox -->
                    <div class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox">
                        <label for="termsCheckbox">
                            Li e concordo com os <a href="#terms" onclick="showTerms()">Termos e Condições</a> da Polymusic.
                        </label>
                    </div>
                    
                    <!-- Booking Button -->
                    <button class="btn" id="confirmButton" onclick="confirmBooking()" disabled>ENTRAR EM CONTATO PARA AGENDAR</button>
                </section>
                
                <!-- Terms Section -->
                <section class="terms-section" id="terms">
                    <div class="section-title">
                        <i class="fas fa-file-contract"></i>
                        <h2>Termos e Condições</h2>
                    </div>
                    
                    <div class="terms-content" id="termsContent">
                        <p>Carregando termos e condições...</p>
                    </div>
                </section>
            </div>
            
            <!-- Right Column: Contact & Info -->
            <div class="right-column">
                <!-- Contact Section -->
                <section class="contact-section">
                    <div class="section-title">
                        <i class="fas fa-headset"></i>
                        <h2>Contato & Suporte</h2>
                    </div>
                    
                    <p>Para dúvidas, orçamentos de vídeo ou suporte técnico, entre em contato:</p>
                    
                    <div class="contact-methods">
                        <div class="contact-item">
                            <div class="contact-icon whatsapp">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="contact-details">
                                <h4>WhatsApp (Áudio)</h4>
                                <p>(81) 98446-3644</p>
                                <p>Atendimento das 9h às 17h</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon whatsapp">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="contact-details">
                                <h4>WhatsApp (Vídeo)</h4>
                                <p>(81) 99134-7040</p>
                                <p>Orçamentos personalizados</p>
                            </div>
                        </div>
                        
                        <div class="contact-item">
                            <div class="contact-icon email">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="contact-details">
                                <h4>E-mail</h4>
                                <p>adm@somax.com.br</p>
                                <p>Respondemos em até 24h "Dias uteis"</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Video Section OTIMIZADA -->
                    <div class="video-section">
                        <h4><i class="fas fa-video"></i> Conheça nosso Estúdio</h4>
                        <p style="margin-bottom: 15px; font-size: 0.9rem; color: var(--color-text-secondary);">
                            Tours virtuais do nosso estúdio! (Passe o mouse para ativar)
                        </p>
                        
                        <!-- Primeiro vídeo - OTIMIZADO -->
                        <div class="video-container" data-video-src="./static/video/studio-tour.mp4">
                            <div class="video-preview" style="background-image: url('static/video/studio-tour-poster.jpg');"></div>
                            <div class="video-overlay">
                                <p>Estudio A <span class="play-icon"><i class="fas fa-play"></i></span></p>
                            </div>
                        </div>
                        
                        <!-- Segundo vídeo - OTIMIZADO -->
                        <div class="video-container" data-video-src="./static/video/studio-tour2.mp4">
                            <div class="video-preview" style="background-image: url('static/video/studio-tour2-poster.jpg');"></div>
                            <div class="video-overlay">
                                <p>Estudio B <span class="play-icon"><i class="fas fa-play"></i></span></p>
                            </div>
                        </div>
                        
                        <!-- Terceiro vídeo (Estúdio C) - OTIMIZADO -->
                        <div class="video-container" data-video-src="./static/video/studio-tour3.mp4">
                            <div class="video-preview" style="background-image: url('static/video/studio-tour3-poster.jpg');"></div>
                            <div class="video-overlay">
                                <p>Estudio C (Vídeo) <span class="play-icon"><i class="fas fa-play"></i></span></p>
                            </div>
                        </div>
                        
                        <p style="margin-top: 15px; font-size: 0.9rem; color: var(--color-text-secondary);">
                            Nosso estúdio possui equipamentos de última geração e isolamento acústico profissional.
                        </p>
                    </div>
                    
                    <!-- Social Media -->
                    <div class="social-media">
                        <h4><i class="fas fa-share-alt"></i> Siga-nos nas Redes Sociais</h4>
                        <div class="social-icons">
                            <a href="https://www.instagram.com/polydiscmusic/" target="_blank" 
                               rel="noopener noreferrer" class="social-icon instagram">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="https://www.youtube.com/@polydisc" target="_blank" 
                               rel="noopener noreferrer" class="social-icon youtube">
                                <i class="fab fa-youtube"></i>
                            </a>
                        </div>
                    </div>
                    
                    <!-- Map Section OTIMIZADA -->
                    <div class="map-section">
                        <h4><i class="fas fa-map-marker-alt"></i> Nossa Localização</h4>
                        <div class="map-container">
                            <!-- Iframe com lazy loading -->
                            <iframe 
                                loading="lazy"
                                data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3950.375272658147!2d-34.88123572407661!3d-8.063448080528425!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x7ab1993e2d6e2a9%3A0xc6556c5b8bb7e8f7!2sR.%20Imperial%2C%201638%20-%20S%C3%A3o%20Jos%C3%A9%2C%20Recife%20-%20PE%2C%2050090-000!5e0!3m2!1spt-BR!2sbr!4v1687500000000!5m2!1spt-BR!2sbr" 
                                width="100%" 
                                height="100%" 
                                style="border:0;" 
                                allowfullscreen="" 
                                referrerpolicy="no-referrer-when-downgrade"
                                title="Localização do Estúdio Polymusic">
                            </iframe>
                        </div>
                        <div class="address-info">
                            <p><strong>Endereço:</strong></p>
                            <p>R. Imperial, 1638 - São José, Recife - PE, 50090-000</p>
                            <p style="margin-top: 10px;">
                                <a href="https://maps.google.com/?q=R.+Imperial,+1638+-+São+José,+Recife+-+PE,+50090-000" 
                                   target="_blank" 
                                   rel="noopener noreferrer"
                                   style="color: var(--color-accent-blue); text-decoration: none;">
                                    <i class="fas fa-directions"></i> Ver rotas no Google Maps
                                </a>
                            </p>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" style="margin-top: 30px;" onclick="openContactForm()">
                        <i class="fas fa-comments"></i> FALE COM A EQUIPE TÉCNICA
                    </button>
                </section>
            </div>
        </div>
    </div>

    <!-- Portfolio Modal -->
    <div class="modal-backdrop" id="portfolioModal" onclick="closePortfolioModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closePortfolioModal()">
                <i class="fas fa-times"></i>
            </button>
            
            <div class="section-title">
                <i class="fas fa-images"></i>
                <h2>Nosso Portfólio</h2>
            </div>
            
            <div class="portfolio-tabs">
                <button class="tab-btn active" onclick="showTab('photos')">
                    <i class="fas fa-camera"></i> Fotos do Estúdio
                </button>
                <button class="tab-btn" onclick="showTab('productions')">
                    <i class="fab fa-youtube"></i> Nossas Produções
                </button>
            </div>
            
            <div class="portfolio-content">
                <!-- Photos Tab -->
                <div class="tab-content active" id="photosTab">
                    <div class="portfolio-gallery" id="portfolioGallery">
                        <!-- Fotos serão carregadas dinamicamente -->
                        <div class="loading">Carregando fotos...</div>
                    </div>
                </div>
                
                <!-- Productions Tab -->
                <div class="tab-content" id="productionsTab">
                    <div class="productions-list" id="productionsList">
                        <!-- Vídeos do YouTube serão carregados dinamicamente -->
                        <div class="loading">Carregando produções...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-logo">
                <i class="fas fa-compact-disc"></i>
            </div>
            <p>Polymusic - Estúdios Profissionais</p>
            <p>Desde 1983 criando a sonoridade perfeita</p>
            <div class="copyright">
                <p>&copy; 2026 Polymusic. Todos os direitos reservados.</p>
                <p>Desenvolvido com <i class="fas fa-heart" style="color: var(--color-brand-primary);"></i> para a comunidade musical</p>
            </div>
            <div class="footer-admin">
                <button class="admin-toggle" onclick="promptAdminPassword()">
                    <i class="fas fa-cog"></i> Administrativo Polymusic
                </button>
            </div>
        </div>
    </footer>

    <!-- Scripts otimizados -->
    <!-- Supabase com defer -->
    <script src="https://unpkg.com/@supabase/supabase-js@2" defer></script>
    
    <!-- Nossos scripts com defer e em ordem correta -->
    <script src="js/config.js" defer></script>
    <script src="js/calendar.js" defer></script>
    <script src="js/admin.js" defer></script>
    <script src="js/main.js" defer></script>
    <script src="js/portfolio.js" defer></script>
    <script src="js/optimization.js" defer></script>
</body>

</html>
